<div
  class="main-container h-100 d-flex justify-content-between flex-column"
  *ngIf="recipe"
>
  <div class="d-flex flex-column overflow-auto">
    <div>
      <div class="image-container d-flex justify-content-between">
        <button
          class="btn position-relative rounded-circle position-relative my-3"
          (click)="goBack()"
        >
          <i class="fa-solid fa-arrow-left" style="color: white"></i>
        </button>
        <span class="d-flex justify-content-end">
          <app-badge
            [color]="'yellow'"
            [text]="recipe.cuisineName"
            [showXButton]="false"
            class="position-absolute"
            style="z-index: 1000"
          ></app-badge>
        </span>
        <img
          [src]="getImageUrl(recipe.pictureUrl)"
          class="w-100 mx-auto d-block recipe-img"
        />
      </div>

      <div class="mb-2 d-flex justify-content-center flex-row">
        <p
          class="card shadow text-center fw-bold px-5 py-2 negative-margin-top mx-4"
          style="max-width: max-content"
        >
          {{ recipe.name }}
        </p>
      </div>
    </div>

    <div class="my-2 mx-3 overflow-auto card rounded shadow">
      <div
        class="d-flex flex-row text-center align-items-center py-2 px-3 pt-4 justify-between"
      >
        <div class="px-2">
          <div class="flex justify-center">
            <svg
              width="40"
              height="40"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.5 10.0003C9.5 9.20875 8.44722 8.99895 8.16791 9.73957C7.49228 11.5311 7 13.1337 7 14.0002C7 16.7616 9.23858 19.0002 12 19.0002C14.7614 19.0002 17 16.7616 17 14.0002C17 13.0693 16.4318 11.2887 15.6784 9.33698C14.7026 6.80879 14.2146 5.54469 13.6123 5.4766C13.4196 5.45482 13.2093 5.49399 13.0374 5.58371C12.5 5.86413 12.5 7.24285 12.5 10.0003C12.5 10.8287 11.8284 11.5003 11 11.5003C10.1716 11.5003 9.5 10.8287 9.5 10.0003Z"
                stroke="#518048"
                stroke-opacity="0.25"
              />
              <path
                d="M7 14C7 16.7614 9.23858 19 12 19C14.7614 19 17 16.7614 17 14"
                stroke="#386641"
                stroke-linecap="round"
              />
            </svg>
          </div>
          <div class="text-sm text-[#386641]">
            <b>{{ recipe.kcals }}</b> kcals
          </div>
        </div>
        <div class="px-2">
          <div class="flex justify-center">
            <svg
              width="40"
              height="40"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                cx="12"
                cy="13"
                r="7"
                fill="#ffb703"
                fill-opacity="0.25"
                stroke="#ffb703"
                stroke-width="1.2"
              />
              <path
                d="M5 5L3 7"
                stroke="#ffb703"
                stroke-width="1.2"
                stroke-linecap="round"
              />
              <path
                d="M19 5L21 7"
                stroke="#ffb703"
                stroke-width="1.2"
                stroke-linecap="round"
              />
              <path
                d="M9 11L11.8093 12.8729C11.9172 12.9448 12.0622 12.9223 12.1432 12.821L14 10.5"
                stroke="#ffb703"
                stroke-width="1.2"
                stroke-linecap="round"
              />
            </svg>
          </div>
          <div class="text-sm text-[#ffb703]">
            <b>{{ recipe.prepTime }}</b> min
          </div>
        </div>
        <div class="px-2">
          <div class="flex justify-center">
            <svg
              width="40"
              height="40"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M7.08384 9.89367C7.62063 7.61232 9.65635 6 12 6C14.3437 6 16.3794 7.61232 16.9162 9.89367L17.5601 12.6304C17.8456 13.8438 18.5178 14.9315 19.4755 15.7296C19.9917 16.1598 19.6875 17 19.0155 17H4.98449C4.31249 17 4.00828 16.1598 4.52452 15.7296C5.48215 14.9315 6.15439 13.8438 6.4399 12.6304L7.08384 9.89367Z"
                fill="#023e8a"
                fill-opacity="0.25"
              />
              <path
                d="M12.5 2C12.5 1.72386 12.2761 1.5 12 1.5C11.7239 1.5 11.5 1.72386 11.5 2H12.5ZM12.5 5V2H11.5V5H12.5Z"
                fill="#023e8a"
              />
              <path
                d="M14.35 18C14.4328 18 14.5007 18.0673 14.493 18.1498C14.4484 18.6254 14.1923 19.0746 13.7678 19.4142C13.2989 19.7893 12.663 20 12 20C11.337 20 10.7011 19.7893 10.2322 19.4142C9.80772 19.0746 9.55165 18.6254 9.50702 18.1498C9.49928 18.0673 9.56716 18 9.65 18L12 18L14.35 18Z"
                fill="#023e8a"
              />
            </svg>
          </div>
          <div class="fw-bold text-sm text-[#023e8a]">
            {{ recipe.cookingLevel | titlecase }}
          </div>
        </div>
      </div>

      <div class="d-flex flex-column py-2 px-2">
        <p class="fw-bold mb-2">Description</p>
        <p class="text-sm">
          {{ recipe.description }}
        </p>
        <p class="fw-bold my-2">Ingredients</p>
        <div
          class="d-flex flex-row ingr-item align-items-center mb-1"
          *ngFor="let rec of recipe.ingredientDtoList"
        >
          <img
            [src]="getImageUrl(rec.ingredient.pictureUrl)"
            class="card shadow px-1 py-1"
          />
          <div
            class="grid grid-cols-3 px-2"
            style="width: -webkit-fill-available"
          >
            <p class="small mb-0 fw-bold">{{ rec.ingredient.name }}</p>
            <p class="small mb-0">
              {{ rec.quantity }} {{ rec.unitOfMeasure | lowercase }}
            </p>
            <div
              class="d-flex align-items-center fridge-check"
              *ngIf="
                checkIngredientIfIsInTheFridge(rec.ingredient.id);
                else noInFridge
              "
            >
              <i class="fa-regular fa-circle-check px-1 green-icon"></i>
              <p class="small mb-0 green-icon">In your fridge</p>
            </div>
            <ng-template #noInFridge>
              <div class="d-flex align-items-center fridge-check">
                <i class="fa-regular fa-circle-xmark px-1 red-icon"></i>
                <p class="small mb-0 green-icon red-icon">Not in your fridge</p>
              </div>
            </ng-template>
          </div>
        </div>
        <p class="fw-bold my-2">Instructions</p>
        <dl
          *ngFor="let instruction of recipe.recipeInstructions"
          class="grid grid-cols-1 divide-y divide-gray-200"
        >
          <div class="flex pb-3 items-top">
            <dt class="mb-1 mx-1 text-gray-500 md:text-lg dark:text-gray-400">
              {{ instruction.step }}
            </dt>
            <dd class="text-sm px-2">{{ instruction.details }}</dd>
          </div>
        </dl>
      </div>
    </div>
    <app-navbar></app-navbar>
  </div>
</div>
