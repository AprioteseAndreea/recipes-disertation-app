"use strict";(self.webpackChunkrecipes_disertation_app=self.webpackChunkrecipes_disertation_app||[]).push([[789],{2789:(xe,O,a)=>{a.r(O),a.d(O,{FridgeModule:()=>me});var _=a(6814),k=a(4807),T=a(6273),m=a(6223),S=a(1662),F=a(1806),n=a(5879),y=a(5926),w=a(5869),P=a(1890),R=a(5658),L=a(5777),z=a(4918);function B(t,o){if(1&t&&(n.ynx(0),n.TgZ(1,"option",19),n._uU(2),n.qZA(),n.BQk()),2&t){const i=o.$implicit;n.xp6(1),n.Q6J("ngValue",i),n.xp6(1),n.hij(" ",i.name," ")}}function N(t,o){if(1&t&&(n.ynx(0),n.TgZ(1,"option",20),n._uU(2),n.qZA(),n.BQk()),2&t){const i=o.$implicit;n.xp6(1),n.s9C("value",i),n.xp6(1),n.Oqu(i)}}const U=function(){return{name:"ceva"}};let I=(()=>{var t;class o{constructor(e,l,r,d,c,f,p){this.modalRef=e,this.fb=l,this.notificationService=r,this.fridgeService=d,this.accountService=c,this.authService=f,this.cartService=p,this.units=["g","kg","l","ml","piece"],this.newFridgeItemForm=this.fb.group({ingredient:[{},m.kI.required],unit:["",m.kI.required],quantity:["",m.kI.required]})}ngOnInit(){this.fridgeService.getAllIngredients().subscribe(e=>{console.log(e),this.ingredients=e}),!this.isAddModal&&this.selectedIngredient&&(this.newFridgeItemForm.controls.ingredient.patchValue(this.selectedIngredient.ingredient),this.newFridgeItemForm.controls.unit.patchValue(this.selectedIngredient.unitOfMeasure.toLocaleLowerCase()),this.newFridgeItemForm.controls.quantity.patchValue(this.selectedIngredient.quantity.toString()))}onDropdownShow(e){console.log("on dropdown show: ",e)}getIngredientUrl(e){return`${F.N.apiUrl}/images/${e}`}selectedVal(e,l){return e&&l?e.id===l.id:e===l}deleteItem(){this.cartService.deleteUserIngredient(this.selectedIngredient.id).subscribe({next:()=>{this.notificationService.showSuccess("Success!","The item was successfully deleted!"),this.authService.fetchUserData(!1),this.modalRef.close(!0)},error:e=>{console.log(e),this.notificationService.showError("Error!","The item cannot be deleted!")}})}onSubmit(){const e={ingredient:this.newFridgeItemForm.controls.ingredient.value,quantity:Number(this.newFridgeItemForm.controls.quantity.value),unitOfMeasure:this.newFridgeItemForm.controls.unit.value.toUpperCase(),isCartIngredient:!1};this.isAddModal?this.fridgeService.addIngredient(e,this.accountService.loggedUserValue.id).subscribe({next:r=>{this.notificationService.showSuccess("Success!","A new item was added in your fridge."),this.authService.fetchUserData(!1),this.modalRef.close()},error:r=>{console.log(r),this.notificationService.showError("Error!","The item cannot be added!"),this.modalRef.close()}}):(e.id=this.selectedIngredient.id,this.cartService.updateUserIngredient(e).subscribe({next:()=>{this.notificationService.showSuccess("Success!","The item was successfully updated!"),this.authService.fetchUserData(!1),this.modalRef.close()},error:r=>{console.log(r),this.notificationService.showError("Error!","The item cannot be updated!")}}))}}return(t=o).\u0275fac=function(e){return new(e||t)(n.Y36(y.rn),n.Y36(m.qu),n.Y36(w.g),n.Y36(P.f),n.Y36(R.B),n.Y36(L.e),n.Y36(z.N))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-add-item-component"]],decls:32,vars:9,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"form-floating","mb-3"],["id","ingredient-select","aria-label","Floating label select example","formControlName","ingredient",1,"form-select",3,"compareWith"],["selected","","disabled","",3,"value"],[4,"ngFor","ngForOf"],["for","ingredient-select"],["id","unit-select","aria-label","Floating label select example","formControlName","unit",1,"form-select"],["value","","selected",""],["for","unit-select"],["type","number","id","quantity-select","placeholder","name@example.com","formControlName","quantity",1,"form-control"],["for","quantity-select"],[1,"modal-footer","d-flex","justify-content-between"],[1,"btn","delete-btn",3,"disabled","click"],[1,"btn","close-btn",3,"click"],[1,"btn","btn-warning","ms-2",3,"disabled","click"],[3,"ngValue"],[3,"value"]],template:function(e,l){1&e&&(n.TgZ(0,"div",0)(1,"h5",1),n._uU(2),n.qZA(),n.TgZ(3,"button",2),n.NdJ("click",function(){return l.modalRef.close()}),n.qZA()(),n.TgZ(4,"div",3)(5,"form",4)(6,"div",5)(7,"select",6)(8,"option",7),n._uU(9," Select an ingredient "),n.qZA(),n.YNc(10,B,3,2,"ng-container",8),n.qZA(),n.TgZ(11,"label",9),n._uU(12,"Ingredient"),n.qZA()(),n.TgZ(13,"div",5)(14,"select",10)(15,"option",11),n._uU(16,"Select the measure unit"),n.qZA(),n.YNc(17,N,3,2,"ng-container",8),n.qZA(),n.TgZ(18,"label",12),n._uU(19,"Unit"),n.qZA()(),n.TgZ(20,"div",5),n._UZ(21,"input",13),n.TgZ(22,"label",14),n._uU(23,"Quantity"),n.qZA()()()(),n.TgZ(24,"div",15)(25,"button",16),n.NdJ("click",function(){return l.deleteItem()}),n._uU(26," Delete item "),n.qZA(),n.TgZ(27,"div")(28,"button",17),n.NdJ("click",function(){return l.modalRef.close()}),n._uU(29,"Close"),n.qZA(),n.TgZ(30,"button",18),n.NdJ("click",function(){return l.onSubmit()}),n._uU(31," Save changes "),n.qZA()()()),2&e&&(n.xp6(2),n.hij("\u{1f951}",l.modalTitle,""),n.xp6(3),n.Q6J("formGroup",l.newFridgeItemForm),n.xp6(2),n.Q6J("compareWith",l.selectedVal),n.xp6(1),n.Q6J("value",n.DdM(8,U)),n.xp6(2),n.Q6J("ngForOf",l.ingredients),n.xp6(7),n.Q6J("ngForOf",l.units),n.xp6(8),n.Q6J("disabled",l.isAddModal),n.xp6(5),n.Q6J("disabled",!l.newFridgeItemForm.valid))},dependencies:[_.sg,m._Y,m.YN,m.Kr,m.Fj,m.wV,m.EJ,m.JJ,m.JL,m.sg,m.u],styles:["mdb-modal-container{background:rgba(0,0,0,.4705882353)}.close-btn[_ngcontent-%COMP%]{background-color:#a9a7a7;color:#fafafa}.delete-btn[_ngcontent-%COMP%]{background-color:#c24343;color:#fafafa}"]}),o})();var D=a(2425),V=a(9171),j=a(8394);function H(t,o){if(1&t){const i=n.EpF();n.ynx(0),n.TgZ(1,"div",12),n.NdJ("click",function(){const r=n.CHM(i).index,d=n.oxw();return n.KtG(d.modifyFridgeIngredient(r))}),n.TgZ(2,"span",13),n._uU(3),n.qZA(),n._UZ(4,"img",14),n.TgZ(5,"span",15),n._uU(6),n.qZA()(),n.BQk()}if(2&t){const i=o.$implicit,e=n.oxw();n.xp6(3),n.AsE("",i.quantity," ",i.unitOfMeasure,""),n.xp6(1),n.Q6J("src",e.getIngredientUrl(i.ingredient.pictureUrl),n.LSH),n.xp6(2),n.Oqu(i.ingredient.name)}}const Z=[{path:"",pathMatch:"full",component:(()=>{var t;class o{constructor(e,l,r){this.modalService=e,this.notificationService=l,this.accountService=r,this.ingredients=V.Z.Ingredients,this.modalRef=null}ngOnInit(){this.getFridgeIngredients()}getFridgeIngredients(){this.fridgeData=this.accountService.loggedUserValue.userIngredients.filter(e=>!e.isCartIngredient)}openDialog(){this.modalRef=this.modalService.open(I,{modalClass:"modal-dialog-centered",data:{isAddModal:!0,modalTitle:"Add a new item in your fridge"}}),this.modalRef.onClose.subscribe(e=>{this.getFridgeIngredients()})}getIngredientUrl(e){return`${F.N.apiUrl}/images/${e}`}modifyFridgeIngredient(e){console.log(this.fridgeData[e]),this.modalRef=this.modalService.open(I,{modalClass:"modal-dialog-centered",data:{isAddModal:!1,selectedIngredient:this.fridgeData[e],modalTitle:"Modify an ingredient from your fridge"}}),this.modalRef.onClose.subscribe(l=>{this.getFridgeIngredients()})}}return(t=o).\u0275fac=function(e){return new(e||t)(n.Y36(y.Bh),n.Y36(w.g),n.Y36(R.B))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-fridge"]],viewQuery:function(e,l){if(1&e&&n.Gf(D.FM,7),2&e){let r;n.iGM(r=n.CRH())&&(l.modalRef=r.first)}},decls:16,vars:1,consts:[[1,"main-container","justify-content-between","flex-column","d-flex","bg-white"],[1,"mx-3","column","pt-2",2,"overflow-y","auto"],[1,"heading","my-2"],[1,"d-flex","justify-content-between","mx-2"],[1,"text-lg","font-semibold","text-gray-900","mb-0","text-center"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-sm","font-normal","text-gray-500","text-center"],["type","button",1,"text-sky-700","font-medium","rounded-lg","text-sm","p-2","h-10","text-center","inline-flex","items-center","mr-2","dark:border-sky-500","dark:text-sky-500","dark:hover:text-white","dark:focus:ring-sky-800","dark:hover:bg-sky-500",3,"click"],[1,"fa-solid","fa-plus"],[1,"d-flex","flex-row","main-fridge-container","rounded"],[1,"d-flex","flex-row","justify-content-evenly","rounded","second-fridge-container"],[4,"ngFor","ngForOf"],[1,"position-relative","ingredient-wrapper",3,"click"],[1,"position-relative","badge","bg-info","text-dark","mx-1","my-1","position-absolute","top-0","start-0"],[1,"ingredient-container","d-flex","align-items-end",3,"src"],[1,"position-relative","badge","bg-light","text-dark","mx-1","my-1","position-absolute","bottom-0","end-0"]],template:function(e,l){1&e&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"p",4),n._uU(6," \u{1f9ca} My fridge "),n.qZA(),n.TgZ(7,"div",5)(8,"p",6),n._uU(9," To avoid throwing away food and save money, we'll recommend recipes based on foods you already have in your fridge! "),n.qZA(),n.TgZ(10,"button",7),n.NdJ("click",function(){return l.openDialog()}),n._UZ(11,"i",8),n.qZA()()()()(),n.TgZ(12,"div",9)(13,"div",10),n.YNc(14,H,7,4,"ng-container",11),n.qZA()()(),n._UZ(15,"app-navbar"),n.qZA()),2&e&&(n.xp6(14),n.Q6J("ngForOf",l.fridgeData))},dependencies:[_.sg,j.S],styles:[".main-container[_ngcontent-%COMP%]{height:100vh}.main-fridge-container[_ngcontent-%COMP%]{background-color:#d6e7f5;flex-wrap:wrap}.ingredient-wrapper[_ngcontent-%COMP%]{cursor:pointer}.second-fridge-container[_ngcontent-%COMP%]{background-color:#b4d7f3;width:100%;flex-wrap:wrap;margin:20px}.ingredient-container[_ngcontent-%COMP%]{background-color:#b4d7f3;height:100px;flex-wrap:wrap;width:-moz-fit-content;width:fit-content;padding-top:15px;padding-bottom:7px}span[_ngcontent-%COMP%]{z-index:1000}.btn[_ngcontent-%COMP%]{background-color:#b4d7f3;margin-top:15px;margin-bottom:15px}.backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.39)}"]}),o})()}];let Q=(()=>{var t;class o{}return(t=o).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[S.Bz.forChild(Z),S.Bz]}),o})();var Y=a(3861),h=a(1180);let q=(()=>{var t;class o{}return t=o,(0,h.Z)(o,"\u0275fac",function(e){return new(e||t)}),(0,h.Z)(o,"\u0275mod",n.oAB({type:t})),(0,h.Z)(o,"\u0275inj",n.cJS({imports:[_.ez,m.u5]})),o})();var C=a(9594);let W=(()=>{var t;class o{}return t=o,(0,h.Z)(o,"\u0275fac",function(e){return new(e||t)}),(0,h.Z)(o,"\u0275mod",n.oAB({type:t})),(0,h.Z)(o,"\u0275inj",n.cJS({imports:[_.ez,C.U8]})),o})(),X=(()=>{var t;class o{}return t=o,(0,h.Z)(o,"\u0275fac",function(e){return new(e||t)}),(0,h.Z)(o,"\u0275mod",n.oAB({type:t})),(0,h.Z)(o,"\u0275inj",n.cJS({})),o})();var x=a(3680);a(6825);let $=(()=>{var t;class o{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return(t=o).\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),o})(),G=(()=>{var t;class o{}return(t=o).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[$]}),o})(),le=(()=>{var t;class o{}return(t=o).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[x.BQ,_.ez,G,x.BQ]}),o})();var oe=a(6672);const ce={provide:new n.OlP("mat-select-scroll-strategy"),deps:[C.aV],useFactory:function se(t){return()=>t.scrollStrategies.reposition()}};let fe=(()=>{var t;class o{}return(t=o).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[ce],imports:[_.ez,C.U8,x.Ng,x.BQ,oe.ZD,le,x.Ng,x.BQ]}),o})(),me=(()=>{var t;class o{}return(t=o).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[y.Bh,w.g,D._W],imports:[_.ez,Q,Y.m,k.A0,T.jF,m.UX,q,W,X,fe]}),o})()}}]);