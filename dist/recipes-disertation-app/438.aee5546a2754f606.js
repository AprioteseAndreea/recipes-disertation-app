"use strict";(self.webpackChunkrecipes_disertation_app=self.webpackChunkrecipes_disertation_app||[]).push([[438],{438:(q,m,r)=>{r.r(m),r.d(m,{CartModule:()=>O});var l=r(6814),h=r(4807),_=r(6273),s=r(6223),v=r(3861),C=r(5597),g=r(1662),x=r(8968),b=r(1806),t=r(5879),u=r(5926),f=r(4918),p=r(5869);let y=(()=>{var n;class a{constructor(e,i,c){this.modalRef=e,this.cartService=i,this.notificationService=c}ngOnInit(){}onSubmit(){this.cartService.deleteUserIngredient(this.ingredientId).subscribe({next:()=>{this.notificationService.showSuccess("Success!","The item was successfully deleted!"),this.modalRef.close(!0)},error:e=>{console.log(e),this.notificationService.showError("Error!","The item cannot be deleted!")}})}}return(n=a).\u0275fac=function(e){return new(e||n)(t.Y36(u.rn),t.Y36(f.N),t.Y36(p.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confmodal"]],decls:13,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button",1,"btn","close-btn",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2,"Delete item"),t.qZA()(),t.TgZ(3,"div",2),t._uU(4," Are you sure you want to delete "),t.TgZ(5,"b"),t._uU(6),t.qZA(),t._uU(7,"?\n"),t.qZA(),t.TgZ(8,"div",3)(9,"button",4),t.NdJ("click",function(){return i.modalRef.close()}),t._uU(10," Close "),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(){return i.onSubmit()}),t._uU(12,"Delete"),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(i.modalBlock))},styles:["mdb-modal-container{background:rgba(0,0,0,.4705882353)}.close-btn[_ngcontent-%COMP%]{background-color:#a9a7a7;color:#fafafa}"]}),a})();var Z=r(5658),M=r(5777),T=r(8394);function S(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,c=t.oxw(2);return t.KtG(c.decrementQuantity(i))}),t._UZ(1,"i",25),t.qZA()}}function w(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,c=t.oxw(2);return t.KtG(c.incrementQuantity(i))}),t._UZ(1,"i",26),t.qZA()}}function U(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"a",27),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,c=t.oxw(2);return t.KtG(c.toggleEditMode(i))}),t._UZ(1,"i",28),t.qZA()}}function A(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"a",27),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,c=t.oxw(2);return t.KtG(c.updateCartIngredient(i))}),t._UZ(1,"i",29),t.qZA()}}const E=function(n,a){return{"border border-gray-950":n,"border border-gray-200":a}};function I(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"div",8)(1,"ul",9)(2,"li")(3,"div",10)(4,"div",11)(5,"div"),t._UZ(6,"img",12),t.qZA(),t.TgZ(7,"div",13)(8,"p",14),t._uU(9),t.qZA(),t.TgZ(10,"p",15),t._uU(11),t.ALo(12,"titlecase"),t.qZA()()(),t.TgZ(13,"div",16),t.YNc(14,S,2,0,"button",17),t.TgZ(15,"input",18),t.NdJ("ngModelChange",function(i){const d=t.CHM(o).$implicit;return t.KtG(d.quantity=i)}),t.qZA(),t.YNc(16,w,2,0,"button",17),t.qZA(),t.TgZ(17,"div",19)(18,"a",20),t.NdJ("click",function(){const c=t.CHM(o).index,d=t.oxw(2);return t.KtG(d.deleteUserIngredient(c))}),t._UZ(19,"i",21),t.qZA(),t.YNc(20,U,2,0,"a",22),t.YNc(21,A,2,0,"ng-template",null,23,t.W1O),t.qZA()()()()()}if(2&n){const o=a.$implicit,e=t.MAs(22),i=t.oxw(2);t.xp6(3),t.Q6J("ngClass",t.WLB(13,E,o.hasEditMode,!o.hasEditMode)),t.xp6(3),t.Q6J("src",i.getIngredientUrl(o.ingredient.pictureUrl),t.LSH),t.xp6(3),t.hij(" ",o.ingredient.name," "),t.xp6(2),t.hij(" ",t.lcZ(12,11,o.unitOfMeasure)," "),t.xp6(3),t.Q6J("ngIf",o.hasEditMode),t.xp6(1),t.s9C("value",o.quantity),t.Q6J("ngModel",o.quantity)("disabled",!o.hasEditMode),t.xp6(1),t.Q6J("ngIf",o.hasEditMode),t.xp6(4),t.Q6J("ngIf",!o.hasEditMode)("ngIfElse",e)}}function k(n,a){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"p",5),t._uU(6," \u{1f6d2} Shopping cart "),t.qZA(),t.TgZ(7,"p",6),t._uU(8," We have prepared a shopping list for you to make your shopping more efficient and faster! "),t.qZA()()()(),t.YNc(9,I,23,16,"div",7),t.qZA(),t._UZ(10,"app-navbar"),t.qZA()),2&n){const o=t.oxw();t.xp6(9),t.Q6J("ngForOf",o.cartData)}}const D=[{path:"",pathMatch:"full",component:(()=>{var n;class a{constructor(e,i,c,d,N){this.accountService=e,this.cartService=i,this.authService=c,this.notificationService=d,this.modalService=N}ngOnInit(){this.cartData=this.accountService.loggedUserValue.userIngredients.filter(e=>!0===e.isCartIngredient),this.cartData.forEach(e=>{e.hasEditMode=!1})}getIngredientUrl(e){return`${b.N.apiUrl}/images/${e}`}toggleEditMode(e){this.cartData[e].hasEditMode=!this.cartData[e].hasEditMode}decrementQuantity(e){this.cartData[e].quantity>0&&this.cartData[e].quantity--}incrementQuantity(e){this.cartData[e].quantity++}deleteUserIngredient(e){this.modalRef=this.modalService.open(y,{modalClass:"modal-dialog-centered",data:{modalBlock:this.cartData[e].ingredient.name,ingredientId:this.cartData[e].id}}),this.modalRef.onClose.subscribe(i=>{i&&(this.cartData.splice(e,1),this.authService.fetchUserData(!1))})}updateCartIngredient(e){this.cartService.updateUserIngredient(this.cartData[e]).subscribe({next:()=>{this.notificationService.showSuccess("Success!","The item was successfully updated!"),this.toggleEditMode(e)},error:i=>{console.log(i),this.notificationService.showError("Error!","The item cannot be updated!")}})}}return(n=a).\u0275fac=function(e){return new(e||n)(t.Y36(Z.B),t.Y36(f.N),t.Y36(M.e),t.Y36(p.g),t.Y36(u.Bh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart"]],features:[t._Bn([x.b])],decls:1,vars:1,consts:[["class","main-container bg-white",4,"ngIf"],[1,"main-container","bg-white"],[1,"mx-3","column","pt-2","overflow-auto"],[1,"heading","my-2"],[1,"d-flex","justify-content-between","mx-2"],[1,"text-lg","font-semibold","text-gray-900","mb-0","text-center"],[1,"text-sm","font-normal","text-gray-500","text-center"],["class","d-flex flex-column",4,"ngFor","ngForOf"],[1,"d-flex","flex-column"],[1,"mt-2","space-y-3"],[1,"px-3","py-2","d-flex","flex-row","justify-content-between","text-base","font-bold","text-gray-900","rounded-lg","bg-gray-50","hover:bg-gray-100","group","hover:shadow",3,"ngClass"],[1,"d-flex","flex-row","align-items-center","w-2/4"],["onError","this.src='../../../assets/no-content/no-image.png'","alt","Shopping item",1,"img-fluid","rounded-3",2,"width","45px",3,"src"],[1,"ms-3"],[1,"font-semibold","text-gray-900","mb-0","text-break"],[1,"small","mb-0","text-gray-500","font-normal"],[1,"d-flex","flex-row","align-items-center"],["class","btn btn-link px-2",3,"click",4,"ngIf"],["id","form1","min","0","name","quantity","type","number",1,"form-control","form-control-sm","bg-white","text-gray-500",2,"width","60px",3,"value","ngModel","disabled","ngModelChange"],[1,"d-flex","column","align-items-center","justify-content-end","w-1/4"],[1,"trash-icon",3,"click"],[1,"fas","fa-trash-alt","text-red-400"],["class","trash-icon ps-3",3,"click",4,"ngIf","ngIfElse"],["saveMode",""],[1,"btn","btn-link","px-2",3,"click"],[1,"fa-solid","fa-minus","text-gray-500"],[1,"fa-solid","fa-plus","text-gray-500"],[1,"trash-icon","ps-3",3,"click"],[1,"fa-solid","fa-pen-to-square","text-[#ffa500]"],[1,"fa-solid","fa-circle-check","text-[#65a30d]"]],template:function(e,i){1&e&&t.YNc(0,k,11,1,"div",0),2&e&&t.Q6J("ngIf",i.cartData)},dependencies:[l.mk,l.sg,l.O5,s.Fj,s.wV,s.JJ,s.qQ,s.On,T.S,l.rS],styles:[".main-container[_ngcontent-%COMP%]{height:100vh;background-color:#f3f3f3;display:flex;justify-content:space-between;flex-direction:column}.logout-btn[_ngcontent-%COMP%]{z-index:1000;height:-moz-fit-content;height:fit-content;margin-left:10px;background-color:var(--bs-yellow)}.cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto auto auto auto;grid-column-gap:10px;align-items:center;padding:10px;border:1px solid #ccc;margin-bottom:10px}.cart-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;height:auto}.quantity-input[_ngcontent-%COMP%]{width:40px;text-align:center}.remove-btn[_ngcontent-%COMP%]{background-color:transparent;border:none}.trash-icon[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.trash-icon[_ngcontent-%COMP%]{color:#cecece}"]}),a})()}];let J=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(D),g.Bz]}),a})(),O=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[u.Bh],imports:[l.ez,J,v.m,h.A0,_.jF,s.UX,C.uH]}),a})()}}]);